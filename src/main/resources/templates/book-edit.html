<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="#{book.edit.title}">Edit Book</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div th:replace="~{fragments/navbar :: header}"></div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-sm mb-5">
        <div class="card-header bg-warning text-dark">
          <h4 class="mb-0" th:text="#{book.edit.header}">Edit Book</h4>
        </div>
        <div class="card-body">

          <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

          <form th:action="@{/books/update}" th:object="${book}" method="post">

            <input type="hidden" th:field="*{id}">

            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.title}">Book Title</label>
                <input type="text" th:field="*{name}" class="form-control"
                       th:classappend="${#fields.hasErrors('name')} ? 'is-invalid'"
                       th:placeholder="#{book.placeholder.title}">
                <div class="invalid-feedback" th:errors="*{name}">Title Error</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.author}">Author</label>
                <input type="text" th:field="*{author}" class="form-control"
                       th:classappend="${#fields.hasErrors('author')} ? 'is-invalid'"
                       th:placeholder="#{book.placeholder.author}">
                <div class="invalid-feedback" th:errors="*{author}">Author Error</div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.genre}">Genre</label>
                <input type="text" th:field="*{genre}" class="form-control"
                       th:classappend="${#fields.hasErrors('genre')} ? 'is-invalid'"
                       th:placeholder="#{book.placeholder.genre}">
                <div class="invalid-feedback" th:errors="*{genre}">Genre Error</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.price}">Price</label>
                <input type="number" min="0.01" step="0.01" th:field="*{price}" class="form-control"
                       th:classappend="${#fields.hasErrors('price')} ? 'is-invalid'">
                <div class="invalid-feedback" th:errors="*{price}">Price Error</div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.language}">Language</label>
                <select th:field="*{language}" class="form-select">
                  <option th:each="lang : ${languages}"
                          th:value="${lang}" th:text="${lang}">English</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.ageGroup}">Age Group</label>
                <select th:field="*{ageGroup}" class="form-select">
                  <option th:each="age : ${ageGroups}"
                          th:value="${age}" th:text="${age}">Adult</option>
                </select>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.quantity}">Quantity</label>
                <input type="number" min="0" th:field="*{quantity}" class="form-control"
                       th:classappend="${#fields.hasErrors('quantity')} ? 'is-invalid'">
                <div class="invalid-feedback" th:errors="*{quantity}">Qty Error</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.pages}">Pages</label>
                <input type="number" min="1" th:field="*{pages}" class="form-control"
                       th:classappend="${#fields.hasErrors('pages')} ? 'is-invalid'">
                <div class="invalid-feedback" th:errors="*{pages}">Pages Error</div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.publicationDate}">Publication Date</label>
                <input type="date" th:field="*{publicationDate}" class="form-control"
                       th:classappend="${#fields.hasErrors('publicationDate')} ? 'is-invalid'">
                <div class="invalid-feedback" th:errors="*{publicationDate}">Date Error</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" th:text="#{book.field.imageUrl}">Image URL</label>
                <input type="text" th:field="*{imageUrl}" class="form-control"
                       th:placeholder="#{book.placeholder.imageUrl}">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label" th:text="#{book.field.characteristics}">Characteristics</label>
              <input type="text" th:field="*{characteristics}" class="form-control"
                     th:placeholder="#{book.placeholder.characteristics}">
            </div>

            <div class="mb-4">
              <label class="form-label" th:text="#{book.field.description}">Description</label>
              <textarea th:field="*{description}" class="form-control" rows="4"></textarea>
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-warning btn-lg"
                      th:text="#{book.button.update}">
                Update Book
              </button>
              <a href="/books/manage" class="btn btn-secondary"
                 th:text="#{book.button.cancel}">
                Cancel
              </a>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
